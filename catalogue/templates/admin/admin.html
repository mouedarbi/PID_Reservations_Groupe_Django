<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Administration - Système de Réservation{% endblock %}</title>
    
    <!-- Styles provenant du template -->
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/admin-custom.css' %}">
    
    <!-- Phosphor Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    {% block extra_css %}{% endblock %}
</head>
<body class="custom-scrollbar">
    <div class="wrapper">
        <!-- Barre latérale -->
        <aside id="sidebar" class="border-border bg-bg fixed top-0 left-0 z-599 hidden h-screen w-56 flex-col border-r backdrop-blur-2xl md:w-64 xl:flex">
            <!-- En-tête de la sidebar -->
            <div class="border-border sticky top-0 left-0 border-b p-6">
                <i id="sidebar-close" class="ph ph-x text-text absolute top-6 right-6 block cursor-pointer text-xl xl:hidden"></i>
                
                <a href="{% url 'admin:index' %}" class="flex items-center gap-3">
                    <img src="{% static 'admin/images/logo.svg' %}" alt="logo" class="size-12 shrink-0">
                    
                    <div id="sidebar-title" class="transition-opacity duration-300">
                        <h1 class="text-text text-lg font-bold md:text-xl">Reservation Admin</h1>
                        <p class="text-text text-xs">Système de gestion</p>
                    </div>
                </a>
            </div>
            
            <!-- Navigation -->
            <nav class="custom-scrollbar overflow-y-auto p-2 md:p-4">
                <div class="space-y-2">
                    <div class="mb-6">
                        <h5 class="text-muted mb-2 px-3 text-xs font-semibold tracking-wider uppercase">
                            Gestion
                        </h5>
                        <ul class="tabs space-y-1">
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-layout text-2xl"></i>
                                    <span class="nav-text">Vue d'ensemble</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:index' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-house text-2xl"></i>
                                            <span>Accueil</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-calendar text-2xl"></i>
                                    <span class="nav-text">Événements</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:catalogue_show_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-calendar-dots text-2xl"></i>
                                            <span>Spectacles</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'admin:catalogue_representation_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-calendar-check text-2xl"></i>
                                            <span>Représentations</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-ticket text-2xl"></i>
                                    <span class="nav-text">Réservations</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:catalogue_reservation_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-shopping-cart text-2xl"></i>
                                            <span>Réservations</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'admin:catalogue_representationreservation_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-ticket text-2xl"></i>
                                            <span>Détails des réservations</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-users text-2xl"></i>
                                    <span class="nav-text">Utilisateurs</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:auth_user_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-user text-2xl"></i>
                                            <span>Utilisateurs</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'admin:auth_group_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-users-three text-2xl"></i>
                                            <span>Groupes</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-star text-2xl"></i>
                                    <span class="nav-text">Contenu</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:catalogue_artist_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-microphone-stage text-2xl"></i>
                                            <span>Artistes</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'admin:catalogue_type_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-music-note text-2xl"></i>
                                            <span>Types</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'admin:catalogue_review_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-chat-centered-dots text-2xl"></i>
                                            <span>Avis</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-map-pin text-2xl"></i>
                                    <span class="nav-text">Lieux</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:catalogue_location_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-map-pin-area text-2xl"></i>
                                            <span>Lieux</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'admin:catalogue_locality_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-map-trifold text-2xl"></i>
                                            <span>Localités</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="parent-item">
                                <button class="nav-btn flex w-full items-center gap-2 rounded px-4 py-2 text-left hover:bg-gray-100" aria-expanded="false">
                                    <i class="ph ph-gear-six text-2xl"></i>
                                    <span class="nav-text">Paramètres</span>
                                    <i class="ph ph-caret-down ml-auto transition-transform duration-300"></i>
                                </button>
                                <ul class="sub-nav mt-1 ml-6 max-h-0 space-y-1 overflow-hidden transition-all duration-300">
                                    <li>
                                        <a href="{% url 'admin:catalogue_price_changelist' %}" class="nav-item flex items-center gap-2 rounded px-4 py-2 hover:bg-gray-100">
                                            <i class="ph ph-currency-circle-dollar text-2xl"></i>
                                            <span>Prix</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </aside>
        
        <div id="overlay" class="fixed inset-0 z-300 hidden bg-black/50"></div>

        <div class="flex-1">
            <!-- En-tête -->
            <header class="flex-1">
                <nav id="header" class="border-border text-text fixed top-0 right-0 z-200 flex items-center justify-between border-b bg-bg px-2 py-4 sm:px-3 sm:py-4 max-xl:w-full xl:w-[calc(100%-256px)]">
                    <div class="flex items-center gap-2">
                        <div>
                            <button id="sidebar-collapse" class="ml-auto hidden rounded-lg p-2 bg-border/30 hover:bg-border xl:flex items-center cursor-pointer duration-300 ease-in-out">
                                <i id="collapse-icon" class="ph ph-caret-left text-xl transition-transform duration-300"></i>
                            </button>
                        </div>
                        <div class="flex items-center gap-2">
                            <i id="logo" class="ph ph-list text-text block cursor-pointer p-2 text-xl xl:hidden"></i>
                            <h3 id="page-title" class="text-md font-bold sm:text-xl md:text-2xl">{% block page_title %}Administration{% endblock %}</h3>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-center gap-2">
                        <!-- Barre de recherche -->
                        <div class="relative hidden md:block">
                            <input type="text" placeholder="Rechercher..." class="border-border bg-input focus:ring-primary rounded-md border py-2 pr-4 pl-10 transition-colors duration-200 focus:ring-2 focus:outline-none">
                            <i class="ph ph-magnifying-glass text-2xl text-muted absolute top-1/2 left-3 -translate-y-1/2 transform"></i>
                        </div>
                        
                        <!-- Bouton notification -->
                        <div class="relative" id="notification-wrapper">
                            <button id="notification-btn" class="relative cursor-pointer rounded-xl p-1 transition-colors md:p-2.5 flex items-center">
                                <i class="ph ph-bell-ringing text-xl sm:text-2xl"></i>
                                <span class="absolute top-1.5 right-1 h-2 w-2 rounded-full bg-red-500 md:right-1.5"></span>
                            </button>
                            
                            <div id="notification-dropdown" class="bg-bg border-border absolute top-18 -right-28 z-10 hidden w-64 rounded-lg border p-2 md:-right-32">
                                <div id="notification-list" class="custom-scrollbar max-h-96 overflow-y-auto">
                                    <a href="#" class="border-border hover:bg-bg flex items-start gap-3 border-b p-2 transition">
                                        <div class="flex h-8 w-8 items-center justify-center rounded-full bg-red-100 text-red-500">
                                            <i class="ph ph-bell-ringing text-xl"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-text text-xs font-semibold sm:text-sm">
                                                Nouvelle <span class="font-semibold">réservation</span> reçue
                                            </p>
                                            <p class="mt-1 text-[10px] text-gray-500 sm:text-xs">Il y a 5 minutes</p>
                                        </div>
                                    </a>
                                    
                                    <a href="#" class="border-border hover:bg-bg flex items-start gap-3 border-b p-2 transition">
                                        <div class="flex h-8 w-8 items-center justify-center rounded-full bg-green-100 text-green-500">
                                            <i class="ph ph-bell-ringing text-xl"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-text text-xs sm:text-sm">
                                                <span class="font-semibold">Avis</span> en attente de validation
                                            </p>
                                            <p class="mt-1 text-[10px] text-gray-500 sm:text-xs">Il y a 1 heure</p>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <button id="theme-toggle" class="theme-toggle-btn hover:cursor-pointer flex items-center rounded-md p-1 transition-colors sm:p-4" aria-label="Toggle theme">
                            <i class="ph ph-sun-dim text-text hidden text-xl sm:text-2xl dark:inline-block"></i>
                            <i class="ph ph-moon-stars text-text inline-block text-xl sm:text-2xl dark:hidden"></i>
                        </button>
                        
                        <div class="relative">
                            <button id="user-menu-trigger-aside" class="px-2 py-1 sm:px-3 sm:py-2 rounded-2xl flex items-center gap-2 cursor-pointer transition-transform duration-200">
                                <img src="{% static 'admin/images/user-avatar.jpg' %}" alt="avatar" class="size-8 object-cover rounded-full">
                                
                                <i id="user-menu-icon-aside" class="ph ph-caret-down text-text text-xl transition-transform duration-200"></i>
                            </button>
                            
                            <div id="user-menu-dropdown-aside" class="absolute right-0 top-14 px-3 py-4 bg-border rounded-lg w-40 space-y-4 z-50 hidden">
                                <a href="{% url 'admin:password_change' %}" class="flex items-center gap-2 text-text">
                                    <i class="ph ph-user"></i>
                                    <p>Profil</p>
                                </a>
                                
                                <a href="{% url 'admin:password_change' %}" class="flex items-center gap-2 text-text">
                                    <i class="ph ph-gear"></i>
                                    <p>Paramètres</p>
                                </a>
                                
                                <a href="{% url 'admin:logout' %}" class="flex items-center gap-2 text-red-500 hover:text-red-600">
                                    <i class="ph ph-sign-out"></i>
                                    <p>Déconnexion</p>
                                </a>
                            </div>
                        </div>
                    </div>
                </nav>
            </header>
            
            <main id="main-content" class="custom-scrollbar mx-4 mt-24 mb-4 transition-all duration-300 ease-in-out sm:mt-28 md:px-4 xl:ml-64">
                {% block content %}
                    <!-- Contenu principal inséré ici -->
                {% endblock %}
            </main>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'admin/js/admin-custom.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>